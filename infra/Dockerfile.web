# infra/Dockerfile.web (Versi Khusus Development)

FROM node:18-alpine

# Install pnpm secara global
RUN npm install -g pnpm

# Set direktori kerja
WORKDIR /app

# Copy file-file manifest untuk caching dependensi
COPY package.json pnpm-lock.yaml ./
COPY apps/web/package.json ./apps/web/

# Install semua dependensi
RUN pnpm install

# Copy sisa semua kode
COPY . .

EXPOSE 3000

# Perintah default untuk menjalankan dev server
CMD ["pnpm", "--filter", "web", "dev"]